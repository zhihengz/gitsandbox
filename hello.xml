<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs >
    <Require feature="googleapis.client"/>
    <Require feature="locked-domain"/>
    <Require feature="views"/>
  </ModulePrefs>
<Content view="canvas" type="html"><![CDATA[

<script>
var gameUtils = {};

gameUtils.getInitialScopes = function() {
  return [ 'https://www.googleapis.com/auth/emeraldsea.circles.read',
           'https://www.googleapis.com/auth/userinfo.profile' ]
};

// Passed in as the callback to the appsapi script
gameUtils.ApisAreReady = function(loggedIn) {
  console.log('ApisAreReady, loggedIn: ' + loggedIn);
  if (loggedIn) {
    alert( "I am signed in" );
  } else {
    alert( "I am not signed in" );
  }
};

function sendPost(){
  google.sendPost(
    title: 'I lost the game';
    body: 'The body of the post',
    anchorText: 'Play A Game Now',
    params : {'skippreview' : 'true' },
    images: ['http://example.com/lose.png']},
    callback    
  );
}
</script>
<script src="https://apps.sandbox.google.com/js/appsapi.js?container=gcjs&amp;c=2&amp;debug=&amp;_propertyRenaming=0&amp;_prettyPrint=1">
  {
    'appsapi': {},
    'appsutil': {
      'apis_are_ready': gameUtils.ApisAreReady,
      'required_scopes': gameUtils.getInitialScopes()
     },
     'poclient': {
       'update_session': google.updateSessionCallback
     }
  }
</script>
<h1>
hello world
</h1>
<div>
<a href="javascript:sendPost()">send post</a>
</div>
]]>
</Content>
</Module>
